# release-plz configuration for doublezero-offchain workspace
#
# This configuration manages independent releases for each crate in the workspace.
# Each crate maintains its own CHANGELOG.md and version.

[workspace]
# Don't automatically update dependencies - handle separately
dependencies_update = false
# Use PR workflow with release label
pr_labels = ["release"]
# Git tag format: <crate-name>/v<version>
git_tag_name = "{{ package }}/v{{ version }}"
# Enable git releases (goreleaser will handle the actual binary builds)
git_release_enable = true
git_release_draft = false
# Don't publish to crates.io (we're only managing changelogs and tags)
publish = false

# Contributor Rewards
[[package]]
name = "doublezero-contributor-rewards"
changelog_path = "crates/contributor-rewards/CHANGELOG.md"

# Sentinel
[[package]]
name = "doublezero-ledger-sentinel"
changelog_path = "crates/sentinel/CHANGELOG.md"
# Override git tag format for sentinel (uses 'sentinel' prefix instead of full crate name)
git_tag_name = "sentinel/v{{ version }}"

# Solana CLI (2z-cli)
[[package]]
name = "doublezero-solana-cli"
changelog_path = "crates/solana-cli/CHANGELOG.md"
# Override git tag format (uses 'doublezero-solana' prefix)
git_tag_name = "doublezero-solana/v{{ version }}"

# Validator Debt
[[package]]
name = "doublezero-solana-validator-debt"
changelog_path = "crates/validator-debt/CHANGELOG.md"
git_tag_name = "solana-validator-debt/v{{ version }}"

# Library crates (don't create releases for these, just maintain changelogs)
[[package]]
name = "doublezero-scheduled-command"
changelog_path = "crates/scheduled-command/CHANGELOG.md"
git_release_enable = false

[[package]]
name = "doublezero-solana-client-tools"
changelog_path = "crates/solana-client-tools/CHANGELOG.md"
git_release_enable = false

[[package]]
name = "doublezero-sol-conversion-interface"
changelog_path = "crates/solana-interface/sol-conversion/CHANGELOG.md"
git_release_enable = false

[[package]]
name = "slack-notifier"
changelog_path = "crates/slack-notifier/CHANGELOG.md"
git_release_enable = false

[[package]]
name = "doublezero-solana-fork-cli"
changelog_path = "crates/solana-fork/CHANGELOG.md"
git_release_enable = false
